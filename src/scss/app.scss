@import "lib";

/* popup mode */
html.ple-popup-mode {overflow: hidden;}


.ple-editor {
	position: relative;
	min-height: 480px;
	overflow: hidden;
	//border: 1px solid green;
	*, *:before, *:after {
		-webkit-box-sizing: border-box;
		-moz-box-sizing: border-box;
		box-sizing: border-box;
	}

	&.side-active {
		.ple-container {margin-right: $sidebar-width;}
	}
}


/* Container */
.ple-container {
	margin: 0;
	padding: 0;
	//-webkit-transition: margin-right $sidebar-toggle-speed ease-in-out;
	//transition: margin-right $sidebar-toggle-speed ease-in-out;
}


/* Body */
.ple-body {
	//.gridster {
	//	margin: 0 auto;
	//	background: #fff; box-shadow: 0 3px 5px 0 rgba(0,0,0,0.2);
	//	ul {padding:0; list-style: none;}
	//	li {
	//		background: #ddd; cursor: pointer; overflow: hidden;
	//		&.selected {
	//			&:after {
	//				content: ''; position: absolute; z-index: 2;
	//				left: 0; right: 0; top: 0; bottom: 0;
	//				border: 4px solid $col-active;
	//			}
	//		}
	//		&.hover {
	//			&:after {
	//				content: ''; position: absolute; z-index: 2;
	//				left: 0; right: 0; top: 0; bottom: 0;
	//				background: rgba(32,178,146,.3);
	//			}
	//		}
	//		.gs-resize-handle {
	//			html.ple-touch & {
	//				opacity: 1; width: 36px; height: 36px; bottom: 0; right: 0;
	//				background-position: 24px 24px;
	//			}
	//		}
	//		figure {
	//			margin: 0; width: 100%; height: 100%;
	//			background-repeat: no-repeat;
	//			pointer-events: none;
	//		}
	//	}
	//}
}


/* Grid */
.ple-grid {
	background: #fff;
	margin: 0 auto;
	box-shadow: 0 2px 4px rgba(0,0,0,.2);
	&__wrap {
		padding: 30px 30px;
		@extend %transparent-background;
	}

	.react-grid-item {
		cursor: move;
	}
}


/* Toolbar */
.ple-toolbar {
	position: relative; height: 43px;
	&:after {content: ''; display: block; clear: both;}
	.wrap {
		position: absolute; z-index: 11;
		top: 0; width: 100%; height: 43px;
		background: #fff;
		&.fix {position: fixed; top: 0; z-index: 1000;}
	}
	.pop {position: relative; display: none;}
	.block {
		float: left; margin-right: 1px;
		> button {
			display: block; position: relative;
			margin: 0; padding: 0; width: 42px; height: 42px;
			border: none; background: $col-blur; cursor: pointer;
			i {
				position: absolute; display: block; left: 50%; top: 50%;
			}
		}
		&.active {
			> button {background: $col-key;}
			.pop {display: block;}
		}
		//&.color-bg-key {
		//	> button {background: $col-active;}
		//	&.show {display: block;}
		//}
	}
	.edit-setting {
		form {
			position: absolute; left: -5px; top: 0; z-index: 99999; min-width: 270px;
			background: #fff; box-shadow: 1px 1px 8px rgba(0,0,0,.4);
			fieldset {margin: 0; padding: 20px; border: none;}
		}
		legend {@extend %blind;}
		h1 {
			margin: 0 0 10px;
			font-size: 18px; color: $col-key;
		}
		dl {
			display: table; width: 100%; margin: 1px 0;
			> * {
				display: table-cell; vertical-align: middle;
				padding: 3px 0;
			}
			dt {
				width: 95px;
				font-size: 12px; color: #333;
				label {display: inline;}
			}
			dd {
				margin: 0 0 0 100px;
			}
		}
		nav {
			&:after {content: ''; display: block; clear: both;}
			span {
				display: block; width: 50%; float: left;
				&:first-child {padding-right: 1px;}
			}
			button {
				margin: 0; padding: 12px 0; width: 100%;
				font-size: 12px; color: #fff;
				background: $col-blur; border: none; cursor: pointer;
				-webkit-appearance: none;
				&.submit {background: $col-key;}
			}
		}
		.type-input {
			input[type=number] {
				margin: 0; padding: 6px 6px;
				font-size: 12px; color: #111;
				border: 1px solid #c4c7c8; border-radius: 2px;
				box-shadow: inset 0 2px 3px rgba(0,0,0,.2);
			}
			span {
				padding-left: 5px;
				font-size: 12px; color: #333;
			}
		}
		.type-checkbox {
			label {
				padding: 6px 12px 6px 0;
				display: inline-block;
			}
			input {
				margin: 0 0 0 4px;
				padding: 0;
			}
			span {
				padding-left: 6px;
				font-size: 12px; color: #333;
			}
		}
	}

	.edit-color {
		form {
			margin: 0; padding: 0;
			position: absolute; left: -5px; top: 0; z-index: 99999;
			background: #fff; box-shadow: 1px 1px 8px rgba(0,0,0,.4);
		}
		legend {@extend %blind;}
		fieldset {margin: 0; padding: 20px; border: none;}
		.preview {
			position: relative; margin: 5px 0 0 0;
			input {
				display: block; width: 175px; margin: 0; padding: 5px 50px 5px 5px;
				font-size: 13px; color: #222;
				border: 1px solid #aaa;
				outline: 0;
			}
			span {
				position: absolute; display: block;
				right: 0; top: 0; bottom: 0;
				width: 50px; height: 100%;
				border: 1px solid #aaa;
				border-left: 1px solid #ddd;
			}
		}
		nav {
			button {
				width: 100%; display: block; margin: 0; padding: 12px 5px;
				font-size: 12px; color: #fff;
				background: $col-key; border: none; cursor: pointer;
				-webkit-appearance: none;
			}
		}
	}
}


/* Sidebar */
.ple-side {
	> .wrap {
		position: absolute; z-index: 100;
		right: 0; top: 0; bottom: 0;
		width: $sidebar-width;
		padding: 0;
		background: $col-key;
		//-webkit-transition: -webkit-transform $sidebar-toggle-speed ease-in-out;
		//transition: transform $sidebar-toggle-speed ease-in-out;
		-webkit-transform: translateX($sidebar-width);
		transform: translateX($sidebar-width);
		&.show {
			-webkit-transform: translateX(0);
			transform: translateX(0);
		}
	}
	.toggle {
		position: absolute; left: -25px; top: 20px; z-index: 10;
		padding: 10px 5px; margin: 0;
		border: none; cursor: pointer;
		background: transparent;
		span {
			display: block;
			width: 20px; height: 70px;
			background: #4e4e4e;
			border-top-left-radius: 3px; border-bottom-left-radius: 3px;
			box-shadow: inset -1px 0 6px rgba(0,0,0,.4);
		}
		i {display: block; position: absolute; left: 50%; top: 50%;}
	}
	.background {
		position: absolute;
		left: 0; right: 0; top: 0; bottom: 0;
	}
	&.active .toggle i {
		width: 7px; height: 12px; background-position: -112px 0;
		&.abs {margin-left: -4px; margin-top: -6px;}
	}
	.navigation {
		position: absolute; z-index: 2; left: 0; right: 0; top: 0;
		background: $col-key;
		.wrap {
			margin: 30px 15px 10px;
			border-radius: 3px;
			background: #444;
			&:after {content: ''; display: block; clear: both;}
		}
		button, span {
			margin: 0; padding: 0;
			position: relative; float: left; width: 25%; height: 36px;
			border-width: 0 0 0 1px; border-style: solid;
			border-color: #626164; border-color: rgba(255,255,255,.3);
			background: none; cursor: pointer; overflow: hidden;
			&:first-child {border-width: 0;}
		}
		input[type=file] {
			position: absolute; left: 0; top: 0; z-index: 3;
			width: 100%; height: 100%;
			opacity: 0; outline: none;
			white-space: nowrap; cursor: pointer;
			-webkit-user-select: none;
			&::-webkit-file-upload-button {
				visibility: hidden;
			}
		}
		i {
			display: block; position: absolute;
			left: 50%; top: 50%;
		}
	}
	.items {
		$item-height: 63px;
		height: 100%; margin: 0; padding: 75px 0 0;
		.wrap {
			height: 100%; padding: 0 10px 20px;
			overflow-x: hidden; overflow-y: auto;
			-webkit-overflow-scrolling: touch;
			background: $col-key;
		}
		ul {
			margin: 0; padding: 0; list-style: none;
			display: -webkit-flex; display: flex;
			flex-flow: row wrap;
		}
		li {
			width: 33.3333%; padding: 5px;
			&.loading {
				> .progress {
					position: relative;
					width: 100%; height: $item-height;
					background: #444;
					> .bar {
						position: absolute;
						left: 0; right: 0; bottom: 0;
						background: $col-active;
					}
					> .percent {
						position: absolute;
						left: 0; right: 0; top: 50%;
						margin-top: -7px;
						font-size: 11px; color: #fff; text-align: center;
						line-height: 14px;
					}
				}
			}
		}
		button {
			position: relative; display: block; margin: 0 auto; padding: 0; border: none;
			width: 100%; height: $item-height;
			background-size: cover;
			background-repeat: no-repeat;
			background-position: 50% 50%;
			background-color: #fff;
			cursor: pointer;
			text-indent: -9999px;
			outline: none;
			&.active {
				&:after {
					content: ''; display: block; position: absolute;
					left: 0; right: 0; top: 0; bottom: 0;
					border: 4px solid $col-active;
				}
			}
		}
	}
}


/* Popup - Cropper */
.ple-cropper {
	display: none;
	position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 99999;
	&.show {display: block;}
	> .bg {
		display: block; position: fixed;
		top: 0; left: 0; right: 0; bottom: 0; z-index: 1;
		background: #000; background: rgba(0,0,0,.86);
	}
	> .wrap {
		position: absolute; z-index: 3;
		background: #aaa;
	}
	.figure {
		position: relative; margin: 0;
		width: 100%; height: 100%;
		.img-bg {
			width: 100%; height: 100%;
			background-repeat: no-repeat;
		}
		.img-wrap {
			position: relative;
			display: block;
			width: 100%; height: 100%;
			overflow: hidden;
			img {
				position: absolute; display: block;
				//&.animate {
				//	-webkit-transition: left .3s ease-out, top .3s ease-out;
				//	-moz-transition: left .3s ease-out, top .3s ease-out;
				//	transition: left .3s ease-out, top .3s ease-out;
				//}
			}
		}
		.area {
			position: absolute; display: none;
			//left: 0; top: 0; width: 50px; height: 50px;
			cursor: move;
			&:before, &:after {content: ''; position: absolute;}
			&:before {left: 0; right: 0; top: 0; bottom: 0; border: 1px dashed #000;}
			&:after {left: 1px; top: 1px; right: -1px; bottom: -1px; border: 1px dashed #fff;}
			&.show {display: block;}
			//&.animate {
			//	-webkit-transition: left .3s ease-out, top .3s ease-out;
			//	-moz-transition: left .3s ease-out, top .3s ease-out;
			//	transition: left .3s ease-out, top .3s ease-out;
			//}
			.resize {
				position: absolute; right: -6px; bottom: -6px; z-index: 2;
				margin: 0; padding: 0; display: block;
				width: 24px; height: 24px;
				text-indent: -9999px; overflow: hidden;
				border: none; outline: 0; background: none;
				cursor: nwse-resize;
				&:before, &:after {
					content: ''; display: block; position: absolute;
					right: 2px; bottom: 2px;
					background: #fff;
				}
				&:before {width: 16px; height: 4px;}
				&:after {width: 4px; height: 16px;}
			}
		}
	}
	nav {
		position: absolute; z-index: 3;
		right: -50px; top: 0;
		button {
			position: relative; display: block; margin: 0 0 1px;
			width: 40px; height: 40px;
			background: #888;
			text-align: center;
			text-indent: -9999px; border: none; cursor: pointer; outline: 0;
			&.active {background: $col-active;}
			i {
				position: absolute; display: block;
				left: 50%; top: 50%;
			}
		}
	}
}


/* Popup - Result */
.ple-result {
	display: none;
	position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 99999;
	overflow: auto; background: #fff;
	&.show {display: block;}
	header {
		margin: 0 0 15px;
		h1 {
			margin: 0;
			font-family: $font-eng; font-size: 30px; color: #222;
		}
		p {
			margin: 5px 0;
			font-size: 13px;
		}
	}
	.wrap {
		position: relative; z-index: 2;
		max-width: 1000px; padding: 15px 30px 30px; margin: 0 auto;
		textarea {
			display: none; width: 100%; height: 78vh; padding: 20px;
			font-size: 12px; color: #222;
			font-family: 'Monaco', 'Tahoma', sans-serif;
			border: 1px solid #ccc;
			&.show {display: block;}
		}
		figure {
			display: none; margin: 0; padding: 30px;
			@extend %transparent-background;
			&.show {display: block;}
			img {display: block; max-width: 100%; margin: 0 auto;}
		}
	}
	.close {
		position: absolute; right: 30px; top: 15px; z-index: 2;
		margin: 0; padding: 5px;
		border: none; background: none; cursor: pointer;
		overflow: hidden;
		i {
			@extend %icon-close;
			width: 32px; height: 32px;
		}
	}
}


/* fix gridster */
.gridster .dragging,
.gridster .resizing {
	z-index: 10 !important;
	-webkit-transition: none !important;
	-moz-transition: none !important;
	-o-transition: all 0s !important;
	transition: none !important;
}


/* placeholder */
.ple-sidebar-placeholder {
	display: block; position: absolute; z-index: 10000; list-style: none;
	left: -999px; top: -999px;
	opacity: .8;
	span {
		position: relative; display: block;
		width: 100%; height: 100%;
		background-size: cover;
		background-repeat: no-repeat;
		background-position: 50% 50%;
		background-color: #fff;
		text-indent: -9999px;
		cursor: pointer;
	}
}