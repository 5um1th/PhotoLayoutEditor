{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app.pkgd.js","src/js/App.jsx","src/js/container/Container.jsx","src/js/container/Gridster.jsx","src/js/container/NavBottom.jsx","src/js/container/NavTop.Form.jsx","src/js/container/NavTop.jsx","src/js/header/Header.jsx","src/js/lib/Uploader.js","src/js/lib/util.js","src/js/sidebar/Nav.jsx","src/js/sidebar/Sidebar.jsx","src/js/sidebar/UploadFiles.jsx"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","global","React","window","ReactDOM","Header","Container","Sidebar","App","createClass","displayName","saveWidth","$editor","$sidebar","show_sidebar","localStorage","getItem","getInitialState","componentDidMount","_this","this","$","findDOMNode","refs","editor","sidebar","on","container","navTop","scrollEvent","addClass","actGridster","attachImages","images","updateAttachImages","toggleSidebar","bool","setItem","width","toggleClass","css","resizeWidth","render","createElement","ref","className","uploadScript","preference","show","state","defaultUploadFiles","document","getElementById","self","./container/Container.jsx","./header/Header.jsx","./sidebar/Sidebar.jsx",2,"NavTop","Gridster","NavBottom","originalPreference","height","max_col","max_scale","outer_margin","inner_margin","action","dynamicParameter","gridster","updatePreference","params","setState","closeSetting","resetPreference","items","log","actAddBlcok","addBlock","actShuffleBlocks","shuffleBlocks","generate","update","reset","actAddBlock","props","./Gridster.jsx","./NavBottom.jsx","./NavTop.jsx",3,"util","$gridster","saveBlocks","create","pref","innnerMargin","outerMargin","append","each","k","parseInt","attr","children","resizeWrapWidth","widget_margins","widget_base_dimensions","max_cols","resize","enabled","max_size","data","margin_gridster","parent","margin_editor","width_sidebar","bodyWidth","outerWidth","clear","find","removeAttr","html","destroy","remove","removeClass","init","randomAddBlocks","block","sizeX","sizeY","$li","text","add_widget","count","max_width","max_height","getRandomRange","toString","x","y","data-col","data-row","data-sizex","data-sizey","../lib/util.js",4,"actGenerator","type","title","onClick",5,"form","propTypes","PropTypes","func","preventDefault","value","id","method","onSubmit","htmlhtmlFor","name","min","max","maxLength","defaultValue","required","htmlFor",6,"NavTopForm","show_form","fix","toggleSetting","target","closest","off","windowTop","scrollTop","$el","offset","top","./NavTop.Form.jsx",7,8,"_typeof","Symbol","iterator","obj","constructor","local","files","complete","reader","FileReader","result","onload","push","readAsDataURL","external","script","dir","url","xhr","XMLHttpRequest","FormData","formData","open","addEventListener","response","readyState","status","JSON","parse","decodeURIComponent","responseText","replace","message","send",9,"shuffle","j","Math","floor","random",10,"inputFile","onChange","upload","multiple","$input","replaceWith","val","clone","attach","toggleSelect",11,"Uploader","Nav","UploadFiles","string","array","uploader","getDefaultProps","uploadImages","importImages","is_loading","map","image","style","backgroundImage","uploadFiles","uploadDir","uploadUrl","forEach","loc","_this2","selectedKeys","confirm","alert","$items","sw","../lib/Uploader.js","./Nav.jsx","./UploadFiles.jsx",12,"is_multiSelect","CTRL","CMD","onKeydown","keyCode","onKeyUp","onSelect","currentKey","currentTarget","getAttribute","key","item","data-key"],"mappings":"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","file":"app.pkgd.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar React = (typeof window !== \"undefined\" ? window['React'] : typeof global !== \"undefined\" ? global['React'] : null);\nvar ReactDOM = (typeof window !== \"undefined\" ? window['ReactDOM'] : typeof global !== \"undefined\" ? global['ReactDOM'] : null);\n\n// init components\nvar Header = require('./header/Header.jsx');\nvar Container = require('./container/Container.jsx');\nvar Sidebar = require('./sidebar/Sidebar.jsx');\n\n// App\nvar App = React.createClass({\n\n\tdisplayName: 'photo-layout-editor',\n\tsaveWidth: 0,\n\t$editor: null,\n\t$sidebar: null,\n\tshow_sidebar: localStorage.getItem('sidebar') != 'false',\n\n\tgetInitialState: function getInitialState() {\n\t\treturn {};\n\t},\n\tcomponentDidMount: function componentDidMount() {\n\t\tvar _this = this;\n\n\t\tthis.$editor = $(ReactDOM.findDOMNode(this.refs.editor));\n\t\tthis.$sidebar = $(ReactDOM.findDOMNode(this.refs.sidebar));\n\n\t\t// scroll event\n\t\t$(window).on('scroll', function (e) {\n\t\t\t_this.refs.container.refs.navTop.scrollEvent();\n\t\t});\n\n\t\t// show sidebar\n\t\tif (this.show_sidebar) {\n\t\t\tthis.$editor.addClass('on-sidebar');\n\t\t}\n\n\t\t// play gridster\n\t\tthis.refs.container.actGridster();\n\t},\n\n\n\t/**\n  * Attach images\n  *\n  * @param {array} images\n  */\n\tattachImages: function attachImages(images) {\n\t\tthis.refs.container.updateAttachImages(images);\n\t},\n\n\n\t/**\n  * Toggle side bar\n  */\n\ttoggleSidebar: function toggleSidebar() {\n\t\tvar bool = !this.show_sidebar;\n\t\tlocalStorage.setItem('sidebar', bool);\n\t\tthis.show_sidebar = bool;\n\n\t\tthis.saveWidth = bool ? this.saveWidth + this.$sidebar.width() : this.saveWidth - this.$sidebar.width();\n\n\t\tthis.$editor.toggleClass('on-sidebar');\n\t\tthis.$editor.css('min-width', this.saveWidth);\n\t},\n\n\n\t/**\n  * Resize container width\n  *\n  * @param {int} width\n  */\n\tresizeWidth: function resizeWidth(width) {\n\t\tthis.saveWidth = this.show_sidebar ? width : width - this.$sidebar.width();\n\t\tthis.$editor.css('min-width', this.saveWidth);\n\t},\n\n\n\t/**\n  * render\n  */\n\trender: function render() {\n\t\treturn React.createElement(\n\t\t\t'div',\n\t\t\t{ ref: 'editor', className: 'ple-editor' },\n\t\t\tReact.createElement(Header, null),\n\t\t\tReact.createElement(Container, {\n\t\t\t\tref: 'container',\n\t\t\t\tresizeWidth: this.resizeWidth }),\n\t\t\tReact.createElement(Sidebar, {\n\t\t\t\tref: 'sidebar',\n\t\t\t\tuploadScript: preference.uploadScript,\n\t\t\t\tshow: this.state.show_sidebar,\n\t\t\t\ttoggleSidebar: this.toggleSidebar,\n\t\t\t\tattachImages: this.attachImages,\n\t\t\t\tdefaultUploadFiles: preference.defaultUploadFiles })\n\t\t);\n\t}\n});\n\n// render App\nReactDOM.render(React.createElement(App, null), document.getElementById('app'));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./container/Container.jsx\":2,\"./header/Header.jsx\":7,\"./sidebar/Sidebar.jsx\":11}],2:[function(require,module,exports){\n'use strict';\n\nvar NavTop = require('./NavTop.jsx');\nvar Gridster = require('./Gridster.jsx');\nvar NavBottom = require('./NavBottom.jsx');\n\nmodule.exports = React.createClass({\n\n\tdisplayName: 'Container',\n\toriginalPreference: {},\n\n\tgetInitialState: function getInitialState() {\n\t\treturn {\n\t\t\tpreference: {\n\t\t\t\twidth: 100,\n\t\t\t\theight: 100,\n\t\t\t\tmax_col: 5,\n\t\t\t\tmax_scale: 2,\n\t\t\t\touter_margin: 10,\n\t\t\t\tinner_margin: 10\n\t\t\t},\n\t\t\taction: null,\n\t\t\tdynamicParameter: {}\n\t\t};\n\t},\n\tcomponentDidMount: function componentDidMount() {\n\t\tthis.originalPreference = this.state.preference;\n\t\tthis.gridster = this.refs.gridster;\n\t},\n\n\n\t/**\n  * Update preference\n  *\n  * @param {object} params\n  */\n\tupdatePreference: function updatePreference(params) {\n\t\tthis.setState({ preference: params, action: 'updatePreference' });\n\t\tthis.refs.navTop.closeSetting();\n\t},\n\n\n\t/**\n  * Reset preference\n  */\n\tresetPreference: function resetPreference() {\n\t\tthis.setState({ preference: this.originalPreference, action: null });\n\t},\n\n\n\t/**\n  * Update attach images\n  *\n  * @param {array} items\n  */\n\tupdateAttachImages: function updateAttachImages(items) {\n\t\tlog('act import');\n\t\tlog(items);\n\t},\n\n\n\t/**\n  * Play add block\n  */\n\tactAddBlcok: function actAddBlcok() {\n\t\tthis.refs.gridster.addBlock();\n\t},\n\n\n\t/**\n  * Play shuffle blocks\n  */\n\tactShuffleBlocks: function actShuffleBlocks() {\n\t\tthis.refs.gridster.shuffleBlocks();\n\t},\n\n\n\t/**\n  * Play Gridster\n  */\n\tactGridster: function actGridster() {\n\t\tthis.setState({ action: 'init' });\n\t},\n\n\n\t/**\n  * Generate\n  */\n\tgenerate: function generate() {\n\t\tlog('generate output');\n\t},\n\n\n\t/**\n  * render\n  */\n\trender: function render() {\n\t\treturn React.createElement(\n\t\t\t'div',\n\t\t\t{ className: 'ple-container' },\n\t\t\tReact.createElement(NavTop, {\n\t\t\t\tref: 'navTop',\n\t\t\t\tupdate: this.updatePreference,\n\t\t\t\treset: this.resetPreference,\n\t\t\t\tactAddBlock: this.actAddBlcok,\n\t\t\t\tactShuffleBlocks: this.actShuffleBlocks,\n\t\t\t\tpreference: this.state.preference }),\n\t\t\tReact.createElement(Gridster, {\n\t\t\t\tref: 'gridster',\n\t\t\t\tpreference: this.state.preference,\n\t\t\t\taction: this.state.action,\n\t\t\t\tresizeWidth: this.props.resizeWidth,\n\t\t\t\tdynamicParameter: this.state.dynamicParameter }),\n\t\t\tReact.createElement(NavBottom, {\n\t\t\t\tgenerate: this.generate })\n\t\t);\n\t}\n});\n\n},{\"./Gridster.jsx\":3,\"./NavBottom.jsx\":4,\"./NavTop.jsx\":6}],3:[function(require,module,exports){\n'use strict';\n\nvar util = require('../lib/util.js');\n\nmodule.exports = React.createClass({\n\n\tdisplayName: 'Gridster',\n\n\t$gridster: null,\n\tgridster: null,\n\tsaveBlocks: null,\n\n\tcomponentDidMount: function componentDidMount() {\n\t\tthis.$gridster = $(ReactDOM.findDOMNode(this.refs.gridster));\n\t},\n\n\n\t/**\n  * Create block\n  */\n\tcreate: function create() {\n\t\tvar pref = this.props.preference;\n\t\tvar innnerMargin = pref.inner_margin * 0.5;\n\t\tvar outerMargin = innnerMargin + pref.outer_margin;\n\n\t\t// set styles\n\t\tthis.$gridster.css('padding', outerMargin + 'px').append('<ul/>');\n\n\t\t// restore blocks\n\t\tif (this.saveBlocks) {\n\t\t\tthis.saveBlocks.each(function (k, o) {\n\t\t\t\tif (parseInt($(o).attr('data-col')) > pref.max_col) {\n\t\t\t\t\t$(o).attr('data-col', pref.max_col);\n\t\t\t\t}\n\t\t\t\tif (parseInt($(o).attr('data-sizex')) > pref.max_scale) {\n\t\t\t\t\t$(o).attr('data-sizex', pref.max_scale);\n\t\t\t\t}\n\t\t\t\tif (parseInt($(o).attr('data-sizey')) > pref.max_scale) {\n\t\t\t\t\t$(o).attr('data-sizey', pref.max_scale);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.$gridster.children('ul').append(this.saveBlocks);\n\t\t}\n\n\t\t// resize wrap width\n\t\tthis.resizeWrapWidth();\n\n\t\t// init gridster\n\t\tthis.gridster = this.$gridster.children('ul').gridster({\n\t\t\twidget_margins: [innnerMargin, innnerMargin],\n\t\t\twidget_base_dimensions: [pref.width, pref.height],\n\t\t\tmax_cols: pref.max_col,\n\t\t\tresize: {\n\t\t\t\tenabled: true,\n\t\t\t\tmax_size: [pref.max_scale, pref.max_scale]\n\t\t\t}\n\t\t}).data('gridster');\n\t},\n\n\n\t/**\n  * Resize container\n  */\n\tresizeWrapWidth: function resizeWrapWidth() {\n\t\tvar pref = this.props.preference;\n\t\tvar width = pref.width * pref.max_col + pref.max_col * pref.inner_margin;\n\t\tthis.$gridster.width(width);\n\n\t\tvar margin_gridster = parseInt(this.$gridster.parent().css('padding-left')) * 2;\n\t\tvar margin_editor = parseInt($('.ple-editor').css('padding')) * 2;\n\t\tvar width_sidebar = $('.ple-sidebar').width();\n\t\tvar bodyWidth = this.$gridster.outerWidth() + margin_gridster + margin_editor + width_sidebar;\n\n\t\tthis.props.resizeWidth(bodyWidth);\n\t},\n\n\n\t/**\n  * Clear blocks\n  */\n\tclear: function clear() {\n\t\tthis.$gridster.find('li').removeAttr('style class');\n\t\tthis.saveBlocks = $(this.$gridster.children('ul').html());\n\t\tthis.gridster.destroy(true);\n\t\tthis.$gridster.children().remove();\n\t\tthis.$gridster.removeClass('ready').removeAttr('style');\n\t},\n\n\n\t/**\n  * Init gridster\n  */\n\tinit: function init() {\n\t\tthis.create();\n\t\tthis.randomAddBlocks(5, this.props.preference.max_scale, this.props.preference.max_scale);\n\t},\n\n\n\t/**\n  * Update preference\n  */\n\tupdatePreference: function updatePreference() {\n\t\tthis.clear();\n\t\tthis.create();\n\t},\n\n\n\t/**\n  * Make block\n  *\n  * @param {object} params\n  */\n\tblock: function block(params) {\n\t\tif (!params.sizeX || !params.sizeY) return false;\n\n\t\tvar $li = $('<li>' + (params.text ? params.text : '') + '</li>');\n\n\t\tthis.gridster.add_widget($li, params.sizeX, params.sizeY, false);\n\t},\n\n\n\t/**\n  * Random add blocks\n  *\n  * @param {int} count\n  * @param {int} max_width\n  * @param {int} max_height\n  */\n\trandomAddBlocks: function randomAddBlocks(count, max_width, max_height) {\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tthis.block({\n\t\t\t\tsizeX: util.getRandomRange(1, max_width),\n\t\t\t\tsizeY: util.getRandomRange(1, max_height),\n\t\t\t\ttext: i.toString()\n\t\t\t});\n\t\t}\n\t},\n\n\n\t/**\n  * Add block\n  *\n  * @param {int} x\n  * @param {int} y\n  */\n\taddBlock: function addBlock(x, y) {\n\t\tx = x || 1;\n\t\ty = y || 1;\n\t\tx = x > this.props.preference.max_scale ? this.props.preference.max_scale : x;\n\t\ty = y > this.props.preference.max_scale ? this.props.preference.max_scale : y;\n\t\tthis.block({ sizeX: x, sizeY: y, text: 'add' });\n\t},\n\n\n\t/**\n  * Shuffle blocks\n  */\n\tshuffleBlocks: function shuffleBlocks() {\n\t\tvar _this = this;\n\n\t\tthis.clear();\n\n\t\tthis.saveBlocks.each(function (k, o) {\n\t\t\t$(o).attr({\n\t\t\t\t'data-col': util.getRandomRange(1, _this.props.preference.max_col),\n\t\t\t\t'data-row': util.getRandomRange(1, 2),\n\t\t\t\t'data-sizex': util.getRandomRange(1, _this.props.preference.max_scale),\n\t\t\t\t'data-sizey': util.getRandomRange(1, _this.props.preference.max_scale)\n\t\t\t});\n\t\t});\n\n\t\tthis.create();\n\t},\n\n\n\t/**\n  * render\n  */\n\trender: function render() {\n\t\t// act action\n\t\tif (typeof this[this.props.action] === 'function') {\n\t\t\tthis[this.props.action]();\n\t\t}\n\n\t\treturn React.createElement(\n\t\t\t'div',\n\t\t\t{ className: 'gridster-wrap' },\n\t\t\tReact.createElement('div', { ref: 'gridster', className: 'gridster' })\n\t\t);\n\t}\n});\n\n},{\"../lib/util.js\":9}],4:[function(require,module,exports){\n'use strict';\n\nmodule.exports = React.createClass({\n\n\tdisplayName: 'Nav-bottom',\n\n\tactGenerator: function actGenerator() {\n\t\tlog('ACTION GENERATE');\n\t},\n\n\n\t/**\n  * render\n  */\n\trender: function render() {\n\t\treturn React.createElement(\n\t\t\t'nav',\n\t\t\t{ className: 'nav-bottom' },\n\t\t\tReact.createElement(\n\t\t\t\t'button',\n\t\t\t\t{ type: 'button', title: 'Generate export', onClick: this.props.generate },\n\t\t\t\tReact.createElement('i', { className: 'sp-ico ico-check' }),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'span',\n\t\t\t\t\tnull,\n\t\t\t\t\t'Generate'\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n});\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = React.createClass({\n\n\tdisplayName: 'NavTop-Form',\n\tform: null,\n\n\tpropTypes: {\n\t\tupdate: React.PropTypes.func\n\t},\n\n\tgetInitialState: function getInitialState() {\n\t\treturn {};\n\t},\n\tcomponentDidMount: function componentDidMount() {\n\t\tthis.form = ReactDOM.findDOMNode(this.refs.form);\n\t},\n\tupdate: function update(e) {\n\t\te.preventDefault();\n\t\tthis.props.update({\n\t\t\twidth: parseInt(this.form.width.value),\n\t\t\theight: parseInt(this.form.height.value),\n\t\t\tmax_col: parseInt(this.form.max_col.value),\n\t\t\tmax_scale: parseInt(this.form.max_scale.value),\n\t\t\touter_margin: parseInt(this.form.outer_margin.value),\n\t\t\tinner_margin: parseInt(this.form.inner_margin.value)\n\t\t});\n\t},\n\n\n\t/**\n  * render\n  */\n\trender: function render() {\n\t\treturn React.createElement(\n\t\t\t\"article\",\n\t\t\t{ className: \"form\", id: \"settings\" },\n\t\t\tReact.createElement(\n\t\t\t\t\"form\",\n\t\t\t\t{ method: \"post\", ref: \"form\", onSubmit: this.update },\n\t\t\t\tReact.createElement(\n\t\t\t\t\t\"fieldset\",\n\t\t\t\t\tnull,\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"legend\",\n\t\t\t\t\t\t{ className: \"blind\" },\n\t\t\t\t\t\t\"Settings form\"\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"h1\",\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\"Settings\"\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"dl\",\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dt\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t\t{ htmlhtmlFor: \"frm_name\" },\n\t\t\t\t\t\t\t\t\"Min Width\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dd\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\"input\", {\n\t\t\t\t\t\t\t\ttype: \"number\", name: \"width\", id: \"frm_name\",\n\t\t\t\t\t\t\t\tmin: \"1\", max: \"999\", maxLength: \"3\",\n\t\t\t\t\t\t\t\tdefaultValue: this.props.preference.width,\n\t\t\t\t\t\t\t\trequired: true }),\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\"px\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"dl\",\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dt\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t\t{ htmlFor: \"frm_height\" },\n\t\t\t\t\t\t\t\t\"Min Height\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dd\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\"input\", {\n\t\t\t\t\t\t\t\ttype: \"number\", name: \"height\", id: \"frm_height\",\n\t\t\t\t\t\t\t\tmin: \"1\", max: \"999\",\n\t\t\t\t\t\t\t\tdefaultValue: this.props.preference.height }),\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\"px\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"dl\",\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dt\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t\t{ htmlFor: \"frm_max_col\" },\n\t\t\t\t\t\t\t\t\"Max Column\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dd\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\"input\", {\n\t\t\t\t\t\t\t\ttype: \"number\", name: \"max_col\", id: \"frm_max_col\",\n\t\t\t\t\t\t\t\tmin: \"1\", max: \"99\",\n\t\t\t\t\t\t\t\tdefaultValue: this.props.preference.max_col }),\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\"ea\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"dl\",\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dt\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t\t{ htmlFor: \"frm_max_scale\" },\n\t\t\t\t\t\t\t\t\"Max Scale\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dd\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\"input\", {\n\t\t\t\t\t\t\t\ttype: \"number\", name: \"max_scale\", id: \"frm_max_scale\",\n\t\t\t\t\t\t\t\tmin: \"1\", max: \"99\",\n\t\t\t\t\t\t\t\tdefaultValue: this.props.preference.max_scale }),\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\"x\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"dl\",\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dt\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t\t{ htmlFor: \"frm_outer_margin\" },\n\t\t\t\t\t\t\t\t\"Outer Margin\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dd\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\"input\", {\n\t\t\t\t\t\t\t\ttype: \"number\", name: \"outer_margin\", id: \"frm_outer_margin\",\n\t\t\t\t\t\t\t\tmin: \"1\", max: \"500\",\n\t\t\t\t\t\t\t\tdefaultValue: this.props.preference.outer_margin }),\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\"px\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"dl\",\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dt\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\t\t{ htmlFor: \"frm_inner_margin\" },\n\t\t\t\t\t\t\t\t\"Inner Margin\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"dd\",\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tReact.createElement(\"input\", {\n\t\t\t\t\t\t\t\ttype: \"number\", name: \"inner_margin\", id: \"frm_inner_margin\",\n\t\t\t\t\t\t\t\tmin: \"1\", max: \"500\",\n\t\t\t\t\t\t\t\tdefaultValue: this.props.preference.inner_margin }),\n\t\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\"px\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t\"nav\",\n\t\t\t\t\tnull,\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"button\",\n\t\t\t\t\t\t\t{ type: \"reset\", onClick: this.props.reset },\n\t\t\t\t\t\t\t\"Reset\"\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\"span\",\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t\"button\",\n\t\t\t\t\t\t\t{ type: \"submit\", className: \"submit\" },\n\t\t\t\t\t\t\t\"Apply\"\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n});\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\n// init components\nvar NavTopForm = require('./NavTop.Form.jsx');\n\nmodule.exports = React.createClass({\n\n\tdisplayName: 'NavTop',\n\n\tgetInitialState: function getInitialState() {\n\t\treturn {\n\t\t\tshow_form: false,\n\t\t\tfix: false\n\t\t};\n\t},\n\n\n\t/**\n  * CLICK EVENTS\n  */\n\n\t/**\n  * Toggle setting form\n  */\n\ttoggleSetting: function toggleSetting() {\n\t\tvar self = this;\n\t\tif (!this.state.show_form == true) {\n\t\t\t$(document).on('click', function (e) {\n\t\t\t\tif (!$(e.target).closest('#settings').length) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t$(this).off('click');\n\t\t\t\t\tself.setState({ show_form: false });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.setState({ show_form: !this.state.show_form });\n\t},\n\n\n\t/**\n  * Close setting layer\n  */\n\tcloseSetting: function closeSetting() {\n\t\t$(document).off('click');\n\t\tthis.setState({ show_form: false });\n\t},\n\n\n\t/**\n  * Play scroll event\n  */\n\tscrollEvent: function scrollEvent() {\n\t\tvar windowTop = $(window).scrollTop();\n\t\tvar $el = $(ReactDOM.findDOMNode(this));\n\t\tif ($el.offset().top < windowTop) {\n\t\t\tthis.setState({ fix: true });\n\t\t} else {\n\t\t\tthis.setState({ fix: false });\n\t\t}\n\t},\n\n\n\t/**\n  * RENDER\n  */\n\trender: function render() {\n\t\treturn React.createElement(\n\t\t\t'div',\n\t\t\t{ className: 'nav-top-wrap' },\n\t\t\tReact.createElement(\n\t\t\t\t'nav',\n\t\t\t\t{ className: 'nav-top' + (this.state.fix ? ' fix' : '') },\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: 'block' + (this.state.show_form ? ' is-active' : '') },\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'button',\n\t\t\t\t\t\t{ type: 'button', title: 'Edit preference', onClick: this.toggleSetting },\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t'i',\n\t\t\t\t\t\t\t{ className: 'sp-ico ico-setting abs' },\n\t\t\t\t\t\t\t'Setting'\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tReact.createElement(NavTopForm, {\n\t\t\t\t\t\tupdate: this.props.update,\n\t\t\t\t\t\treset: this.props.reset,\n\t\t\t\t\t\tpreference: this.props.preference })\n\t\t\t\t),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: 'block' },\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'button',\n\t\t\t\t\t\t{ type: 'button', title: 'Shuffle block', onClick: this.props.actShuffleBlocks },\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t'i',\n\t\t\t\t\t\t\t{ className: 'sp-ico ico-arrow-random abs' },\n\t\t\t\t\t\t\t'Random block'\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: 'block' },\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'button',\n\t\t\t\t\t\t{ type: 'button', title: 'Add block', onClick: this.props.actAddBlock },\n\t\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t\t'i',\n\t\t\t\t\t\t\t{ className: 'sp-ico ico-plus abs' },\n\t\t\t\t\t\t\t'Add block'\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n});\n\n},{\"./NavTop.Form.jsx\":5}],7:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = React.createClass({\n\n\tdisplayName: 'Header',\n\n\tcomponentDidMount: function componentDidMount() {},\n\n\trender: function render() {\n\t\treturn React.createElement(\n\t\t\t\"header\",\n\t\t\t{ className: \"ple-header\" },\n\t\t\tReact.createElement(\n\t\t\t\t\"h1\",\n\t\t\t\tnull,\n\t\t\t\t\"Photo Layout Editor\"\n\t\t\t),\n\t\t\tReact.createElement(\n\t\t\t\t\"p\",\n\t\t\t\tnull,\n\t\t\t\t\"사진 레이아웃 에디터입니다. 처음 시작하면 먼저 문서설정을 해주세요!\"\n\t\t\t)\n\t\t);\n\t}\n});\n\n},{}],8:[function(require,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nmodule.exports = function Uploader() {\n\t/**\n  * Local upload\n  *\n  * @param {Array} files\n  * @param {Function} complete\n  * @return {Array}\n  */\n\tthis.local = function (files, complete) {\n\t\tvar reader = new FileReader();\n\t\tvar i = 0;\n\t\tvar result = [];\n\t\treader.onload = function (e) {\n\t\t\tresult.push(e.target.result);\n\n\t\t\t// check last queue\n\t\t\tif (i == files.length - 1) {\n\t\t\t\tcomplete(result);\n\t\t\t} else {\n\t\t\t\t// trigger next queue\n\t\t\t\ti++;\n\t\t\t\treader.readAsDataURL(files[i]);\n\t\t\t}\n\t\t};\n\t\treader.readAsDataURL(files[i]);\n\t};\n\n\t/**\n  * External upload\n  *\n  * @param {String} script\n  * @param {String} dir\n  * @param {String} url\n  * @param {Array} files\n  * @param {Function} complete\n  * @return {Array}\n  */\n\tthis.external = function (script, dir, url, files, complete) {\n\t\tvar xhr = new XMLHttpRequest();\n\n\t\tif (typeof FormData === 'function' || (typeof FormData === 'undefined' ? 'undefined' : _typeof(FormData)) === 'object') {\n\t\t\tvar formData = new FormData();\n\n\t\t\tfor (var i = 0; i < files.length; i++) {\n\t\t\t\tformData.append('files[]', files[i]);\n\t\t\t}\n\t\t\tformData.append('dir', dir);\n\t\t\tformData.append('url', url);\n\n\t\t\txhr.open('post', script, true);\n\t\t\txhr.addEventListener('load', function (e) {\n\t\t\t\tvar response = null;\n\t\t\t\tif (e.target.readyState == 4) {\n\t\t\t\t\tswitch (e.target.status) {\n\t\t\t\t\t\tcase 200:\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tvar result = JSON.parse(decodeURIComponent(e.target.responseText.replace(/\\+/g, '%20')));\n\t\t\t\t\t\t\t\tcomplete(result);\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tcomplete({\n\t\t\t\t\t\t\t\t\t'state': 'error',\n\t\t\t\t\t\t\t\t\t'message': e.target.responseText\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 404:\n\t\t\t\t\t\t\tresponse = {\n\t\t\t\t\t\t\t\tstate: 'error',\n\t\t\t\t\t\t\t\tmessage: '404 - File not found'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 403:\n\t\t\t\t\t\t\tresponse = {\n\t\t\t\t\t\t\t\tstate: 'error',\n\t\t\t\t\t\t\t\tmessage: '403 - Forbidden file type'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tresponse = {\n\t\t\t\t\t\t\t\tstate: 'error',\n\t\t\t\t\t\t\t\tmessage: 'Unknown Error'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresponse = {\n\t\t\t\t\t\tstate: 'error',\n\t\t\t\t\t\tmessage: 'Unknown Error'\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t\txhr.send(formData);\n\t\t}\n\n\t\treturn null;\n\t};\n};\n\n},{}],9:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = {\n\n\t/**\n  * Shuffle items\n  *\n  * @param o\n  * @returns {*}\n  */\n\t// TODO : 인수 타입 확인해보고 주석에 있는 타입 변경하기\n\tshuffle: function shuffle(o) {\n\t\tfor (var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x) {}\n\t\treturn o;\n\t},\n\n\t/**\n  * Random item in range\n  * @param {int} min\n  * @param {int} max\n  * @returns {number}\n  */\n\tgetRandomRange: function getRandomRange(min, max) {\n\t\tmax += 1;\n\t\treturn Math.floor(Math.random() * (max - min) + min);\n\t}\n};\n\n},{}],10:[function(require,module,exports){\n'use strict';\n\nmodule.exports = React.createClass({\n\n\tdisplayName: 'Navigation',\n\n\tgetInitialState: function getInitialState() {\n\t\treturn {\n\t\t\tinputFile: React.createElement('input', { type: 'file', onChange: this.upload, multiple: true })\n\t\t};\n\t},\n\n\n\t/**\n  * Attach images\n  */\n\tattachImages: function attachImages() {\n\t\tlog('attach image to grid block');\n\t},\n\n\n\t/**\n  * Upload images\n  *\n  * @param {Event} e\n  */\n\tupload: function upload(e) {\n\t\tthis.props.upload(e.target.files);\n\n\t\t// reset input[type=file]\n\t\tvar $input = $(this.refs.inputFile);\n\t\t$input.replaceWith($input.val('').clone(true));\n\t},\n\n\n\t/**\n  * render\n  */\n\trender: function render() {\n\t\treturn React.createElement(\n\t\t\t'nav',\n\t\t\t{ className: 'nav-top' },\n\t\t\tReact.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ className: 'wrap' },\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'button',\n\t\t\t\t\t{ type: 'button', title: 'attach images', onClick: this.props.attach },\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'i',\n\t\t\t\t\t\t{ className: 'sp-ico ico-arrow-left abs' },\n\t\t\t\t\t\t'Moving the image to grid block'\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'button',\n\t\t\t\t\t{ type: 'button', title: 'toggle select', onClick: this.props.toggleSelect },\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'i',\n\t\t\t\t\t\t{ className: 'sp-ico ico-select abs' },\n\t\t\t\t\t\t'Toggle all select'\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'span',\n\t\t\t\t\t{ title: 'upload images' },\n\t\t\t\t\tReact.createElement('input', { type: 'file', ref: 'inputFile', onChange: this.upload, multiple: true }),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'i',\n\t\t\t\t\t\t{ className: 'sp-ico ico-upload abs' },\n\t\t\t\t\t\t'upload images'\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'button',\n\t\t\t\t\t{ type: 'button', title: 'remove images', onClick: this.props.remove },\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'i',\n\t\t\t\t\t\t{ className: 'sp-ico ico-trash abs' },\n\t\t\t\t\t\t'remove images'\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n});\n\n},{}],11:[function(require,module,exports){\n'use strict';\n\nvar Uploader = require('../lib/Uploader.js');\nvar Nav = require('./Nav.jsx');\nvar UploadFiles = require('./UploadFiles.jsx');\n\nmodule.exports = React.createClass({\n\n\tdisplayName: 'Sidebar',\n\n\tpropTypes: {\n\t\tuploadScript: React.PropTypes.string,\n\t\tdefaultUploadFiles: React.PropTypes.array\n\t},\n\n\tuploader: new Uploader(),\n\n\tgetDefaultProps: function getDefaultProps() {\n\t\treturn {\n\t\t\tuploadScript: null\n\t\t};\n\t},\n\tgetInitialState: function getInitialState() {\n\t\treturn {\n\t\t\tuploadImages: this.importImages(this.props.defaultUploadFiles),\n\t\t\tis_loading: false\n\t\t};\n\t},\n\n\n\t/**\n  * Import images\n  *\n  * @param {array} files\n  * @return {array}\n  * */\n\timportImages: function importImages(files) {\n\t\tfiles = files || [];\n\t\treturn files.map(function (o) {\n\t\t\treturn {\n\t\t\t\ton: false,\n\t\t\t\timage: o,\n\t\t\t\tstyle: { backgroundImage: 'url(' + o + ')' }\n\t\t\t};\n\t\t});\n\t},\n\n\n\t/**\n  * upload images\n  *\n  * @Param {Files} files\n  */\n\tupload: function upload(files) {\n\t\tvar _this = this;\n\n\t\tvar uploadFiles = [];\n\n\t\tfor (var i = 0; i < files.length; i++) {\n\t\t\tuploadFiles.push(files[i]);\n\t\t}\n\n\t\t// on loading\n\t\tthis.setState({ is_loading: true });\n\n\t\t// action upload\n\t\tif (this.props.uploadScript) {\n\t\t\t// is external script upload\n\t\t\tthis.uploader.external(this.props.uploadScript, this.props.uploadDir, this.props.uploadUrl, uploadFiles, function (response) {\n\t\t\t\t_this.setState({ is_loading: false });\n\n\t\t\t\tif (response.state == 'success') {\n\t\t\t\t\tvar data = response.images;\n\n\t\t\t\t\tdata.forEach(function (o) {\n\t\t\t\t\t\t_this.state.uploadImages.push({\n\t\t\t\t\t\t\ton: false,\n\t\t\t\t\t\t\timage: o.loc,\n\t\t\t\t\t\t\tstyle: { backgroundImage: 'url(' + o.loc + ')' }\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\t_this.setState({\n\t\t\t\t\t\tuploadImages: _this.state.uploadImages\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tlog(response.message);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t// is local upload\n\t\t\tthis.setState({ is_loading: true });\n\t\t\tthis.uploader.local(uploadFiles, function (data) {\n\t\t\t\tvar result = _this.state.uploadImages;\n\t\t\t\t_this.setState({ is_loading: false });\n\n\t\t\t\tdata.forEach(function (o) {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ton: false,\n\t\t\t\t\t\timage: o,\n\t\t\t\t\t\tstyle: { backgroundImage: 'url(' + o + ')' }\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t_this.setState({ uploadImages: result });\n\t\t\t});\n\t\t}\n\t},\n\tremove: function remove() {\n\t\tvar _this2 = this;\n\n\t\tvar selectedKeys = [];\n\n\t\tif (!this.state.uploadImages.length) {\n\t\t\talert('이미지가 없습니다.');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state.uploadImages.forEach(function (o, k) {\n\t\t\tif (o.on) {\n\t\t\t\tselectedKeys.push(k);\n\t\t\t}\n\t\t});\n\n\t\tif (selectedKeys.length) {\n\t\t\tselectedKeys.forEach(function (o) {\n\t\t\t\tdelete _this2.state.uploadImages[o];\n\t\t\t});\n\t\t\tthis.setState({ uploadImages: this.state.uploadImages });\n\t\t} else {\n\t\t\tif (confirm('선택된 사진이 없습니다. 전부 삭제할까요?')) {\n\t\t\t\tthis.setState({ uploadImages: [] });\n\t\t\t}\n\t\t}\n\t},\n\tattach: function attach() {\n\t\tvar items = [];\n\t\tthis.state.uploadImages.forEach(function (o) {\n\t\t\tif (o.on) {\n\t\t\t\titems.push(o.image);\n\t\t\t}\n\t\t});\n\t\tif (items.length) {\n\t\t\tthis.props.attachImages(items);\n\t\t} else {\n\t\t\talert('please select image');\n\t\t\treturn false;\n\t\t}\n\t},\n\ttoggleSelect: function toggleSelect() {\n\t\tvar items = this.state.uploadImages;\n\t\tvar $items = $(ReactDOM.findDOMNode(this.refs.files));\n\t\tvar sw = $items.find('span.on').length > 0;\n\t\titems.forEach(function (o) {\n\t\t\to.on = !sw;\n\t\t});\n\t\tthis.setState({ uploadImages: items });\n\t},\n\tupdate: function update(data) {\n\t\tthis.setState({ uploadImages: data });\n\t},\n\n\n\t/**\n  * render\n  */\n\trender: function render() {\n\t\treturn React.createElement(\n\t\t\t'aside',\n\t\t\t{ className: 'ple-sidebar' + (this.state.is_loading ? ' loading' : '') },\n\t\t\tReact.createElement(\n\t\t\t\t'button',\n\t\t\t\t{ type: 'button', onClick: this.props.toggleSidebar, className: 'toggle' },\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'span',\n\t\t\t\t\tnull,\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'i',\n\t\t\t\t\t\t{ className: 'sp-ico abs' + (this.props.show ? ' ico-arrow-right2' : ' ico-arrow-left2') },\n\t\t\t\t\t\t'Toggle sidebar'\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t),\n\t\t\tReact.createElement(Nav, { ref: 'nav',\n\t\t\t\tupload: this.upload,\n\t\t\t\tremove: this.remove,\n\t\t\t\tattach: this.attach,\n\t\t\t\ttoggleSelect: this.toggleSelect }),\n\t\t\tReact.createElement(UploadFiles, { ref: 'files',\n\t\t\t\tuploadImages: this.state.uploadImages,\n\t\t\t\tupdate: this.update })\n\t\t);\n\t}\n});\n\n},{\"../lib/Uploader.js\":8,\"./Nav.jsx\":10,\"./UploadFiles.jsx\":12}],12:[function(require,module,exports){\n'use strict';\n\nmodule.exports = React.createClass({\n\n\tdisplayName: 'UploadFiles',\n\n\tpropTypes: {\n\t\tuploadImages: React.PropTypes.array,\n\t\tupdate: React.PropTypes.func\n\t},\n\tis_multiSelect: false,\n\n\tgetInitialState: function getInitialState() {\n\t\treturn {};\n\t},\n\tcomponentDidMount: function componentDidMount() {\n\t\tvar _this = this;\n\n\t\tvar CTRL = 17;\n\t\tvar CMD = 91;\n\n\t\tvar onKeydown = function onKeydown(e) {\n\t\t\tif (e.keyCode == CTRL || e.keyCode == CMD) {\n\t\t\t\t_this.is_multiSelect = true;\n\t\t\t\t$(window).off('keydown').on('keyup', onKeyUp);\n\t\t\t}\n\t\t};\n\n\t\tvar onKeyUp = function onKeyUp() {\n\t\t\t_this.is_multiSelect = false;\n\t\t\t$(window).off('keyup').on('keydown', onKeydown);\n\t\t};\n\n\t\t$(window).on('keydown', onKeydown);\n\t},\n\tonSelect: function onSelect(e) {\n\t\tvar currentKey = parseInt(e.currentTarget.getAttribute('data-key'));\n\t\tvar uploadImages = this.props.uploadImages;\n\n\t\tif (this.is_multiSelect) {\n\t\t\tuploadImages[currentKey].on = !uploadImages[currentKey].on;\n\t\t} else {\n\t\t\tuploadImages.forEach(function (data, key) {\n\t\t\t\tdata.on = key == currentKey ? !data.on : false;\n\t\t\t});\n\t\t}\n\n\t\tthis.props.update(uploadImages);\n\t},\n\n\n\t/**\n  * render\n  */\n\trender: function render() {\n\t\tvar _this2 = this;\n\n\t\tvar items = [];\n\n\t\t// make item elements\n\t\tthis.props.uploadImages.forEach(function (item, key) {\n\t\t\titems.push(React.createElement(\n\t\t\t\t'li',\n\t\t\t\t{ key: key, 'data-key': key, onClick: _this2.onSelect },\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'span',\n\t\t\t\t\t{ style: item.style, className: item.on ? 'on' : '' },\n\t\t\t\t\t'.img'\n\t\t\t\t)\n\t\t\t));\n\t\t});\n\n\t\treturn React.createElement(\n\t\t\t'div',\n\t\t\t{ className: 'upload-files' },\n\t\t\tReact.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ className: 'wrap' },\n\t\t\t\tReact.createElement(\n\t\t\t\t\t'ul',\n\t\t\t\t\t{ ref: 'items' },\n\t\t\t\t\titems\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n});\n\n},{}]},{},[1])\n\n","const React = require('React');\nconst ReactDOM = require('ReactDOM');\n\n// init components\nconst Header = require('./header/Header.jsx');\nconst Container = require('./container/Container.jsx');\nconst Sidebar = require('./sidebar/Sidebar.jsx');\n\n\n// App\nconst App = React.createClass({\n\n\tdisplayName : 'photo-layout-editor',\n\tsaveWidth : 0,\n\t$editor : null,\n\t$sidebar : null,\n\tshow_sidebar : (localStorage.getItem('sidebar') != 'false'),\n\n\tgetInitialState()\n\t{\n\t\treturn {};\n\t},\n\n\tcomponentDidMount()\n\t{\n\t\tthis.$editor = $(ReactDOM.findDOMNode(this.refs.editor));\n\t\tthis.$sidebar = $(ReactDOM.findDOMNode(this.refs.sidebar));\n\n\t\t// scroll event\n\t\t$(window).on('scroll', (e) => {\n\t\t\tthis.refs.container.refs.navTop.scrollEvent();\n\t\t});\n\n\t\t// show sidebar\n\t\tif (this.show_sidebar)\n\t\t{\n\t\t\tthis.$editor.addClass('on-sidebar');\n\t\t}\n\n\t\t// play gridster\n\t\tthis.refs.container.actGridster();\n\t},\n\n\t/**\n\t * Attach images\n\t *\n\t * @param {array} images\n\t */\n\tattachImages(images)\n\t{\n\t\tthis.refs.container.updateAttachImages(images);\n\t},\n\n\t/**\n\t * Toggle side bar\n\t */\n\ttoggleSidebar()\n\t{\n\t\tvar bool = !this.show_sidebar;\n\t\tlocalStorage.setItem('sidebar', bool);\n\t\tthis.show_sidebar = bool;\n\n\t\tthis.saveWidth = (bool) ? this.saveWidth + this.$sidebar.width() : this.saveWidth - this.$sidebar.width();\n\n\t\tthis.$editor.toggleClass('on-sidebar');\n\t\tthis.$editor.css('min-width', this.saveWidth);\n\t},\n\n\t/**\n\t * Resize container width\n\t *\n\t * @param {int} width\n\t */\n\tresizeWidth(width)\n\t{\n\t\tthis.saveWidth = (this.show_sidebar) ? width : width - this.$sidebar.width();\n\t\tthis.$editor.css('min-width', this.saveWidth);\n\t},\n\n\t/**\n\t * render\n\t */\n\trender()\n\t{\n\t\treturn (\n\t\t\t<div ref=\"editor\" className=\"ple-editor\">\n\t\t\t\t<Header />\n\t\t\t\t<Container\n\t\t\t\t\tref=\"container\"\n\t\t\t\t\tresizeWidth={this.resizeWidth}/>\n\t\t\t\t<Sidebar\n\t\t\t\t\tref=\"sidebar\"\n\t\t\t\t\tuploadScript={preference.uploadScript}\n\t\t\t\t\tshow={this.state.show_sidebar}\n\t\t\t\t\ttoggleSidebar={this.toggleSidebar}\n\t\t\t\t\tattachImages={this.attachImages}\n\t\t\t\t\tdefaultUploadFiles={preference.defaultUploadFiles}/>\n\t\t\t</div>\n\t\t);\n\t}\n});\n\n\n// render App\nReactDOM.render(<App/>, document.getElementById('app'));\n","const NavTop = require('./NavTop.jsx');\nconst Gridster = require('./Gridster.jsx');\nconst NavBottom = require('./NavBottom.jsx');\n\n\nmodule.exports = React.createClass({\n\n\tdisplayName : 'Container',\n\toriginalPreference : {},\n\n\tgetInitialState()\n\t{\n\t\treturn {\n\t\t\tpreference : {\n\t\t\t\twidth : 100,\n\t\t\t\theight : 100,\n\t\t\t\tmax_col : 5,\n\t\t\t\tmax_scale : 2,\n\t\t\t\touter_margin : 10,\n\t\t\t\tinner_margin : 10\n\t\t\t},\n\t\t\taction : null,\n\t\t\tdynamicParameter : {}\n\t\t};\n\t},\n\n\tcomponentDidMount()\n\t{\n\t\tthis.originalPreference = this.state.preference;\n\t\tthis.gridster = this.refs.gridster;\n\t},\n\n\t/**\n\t * Update preference\n\t *\n\t * @param {object} params\n\t */\n\tupdatePreference(params)\n\t{\n\t\tthis.setState({ preference : params, action: 'updatePreference' });\n\t\tthis.refs.navTop.closeSetting();\n\t},\n\n\t/**\n\t * Reset preference\n\t */\n\tresetPreference()\n\t{\n\t\tthis.setState({ preference : this.originalPreference, action : null });\n\t},\n\n\t/**\n\t * Update attach images\n\t *\n\t * @param {array} items\n\t */\n\tupdateAttachImages(items)\n\t{\n\t\tlog('act import');\n\t\tlog(items);\n\t},\n\n\t/**\n\t * Play add block\n\t */\n\tactAddBlcok()\n\t{\n\t\tthis.refs.gridster.addBlock();\n\t},\n\n\t/**\n\t * Play shuffle blocks\n\t */\n\tactShuffleBlocks()\n\t{\n\t\tthis.refs.gridster.shuffleBlocks();\n\t},\n\n\t/**\n\t * Play Gridster\n\t */\n\tactGridster()\n\t{\n\t\tthis.setState({ action : 'init' });\n\t},\n\n\t/**\n\t * Generate\n\t */\n\tgenerate()\n\t{\n\t\tlog('generate output');\n\t},\n\n\t/**\n\t * render\n\t */\n\trender()\n\t{\n\t\treturn (\n\t\t\t<div className=\"ple-container\">\n\t\t\t\t<NavTop\n\t\t\t\t\tref=\"navTop\"\n\t\t\t\t\tupdate={this.updatePreference}\n\t\t\t\t\treset={this.resetPreference}\n\t\t\t\t\tactAddBlock={this.actAddBlcok}\n\t\t\t\t\tactShuffleBlocks={this.actShuffleBlocks}\n\t\t\t\t\tpreference={this.state.preference}/>\n\t\t\t\t<Gridster\n\t\t\t\t\tref=\"gridster\"\n\t\t\t\t\tpreference={this.state.preference}\n\t\t\t\t\taction={this.state.action}\n\t\t\t\t\tresizeWidth={this.props.resizeWidth}\n\t\t\t\t\tdynamicParameter={this.state.dynamicParameter}/>\n\t\t\t\t<NavBottom\n\t\t\t\t\tgenerate={this.generate} />\n\t\t\t</div>\n\t\t);\n\t}\n});\n","const util = require('../lib/util.js');\n\nmodule.exports = React.createClass({\n\n\tdisplayName : 'Gridster',\n\n\t$gridster : null,\n\tgridster : null,\n\tsaveBlocks : null,\n\n\tcomponentDidMount()\n\t{\n\t\tthis.$gridster = $(ReactDOM.findDOMNode(this.refs.gridster));\n\t},\n\n\t/**\n\t * Create block\n\t */\n\tcreate()\n\t{\n\t\tvar pref = this.props.preference;\n\t\tvar innnerMargin = pref.inner_margin * 0.5;\n\t\tvar outerMargin = innnerMargin + pref.outer_margin;\n\n\t\t// set styles\n\t\tthis.$gridster.css('padding', outerMargin+'px').append('<ul/>');\n\n\t\t// restore blocks\n\t\tif (this.saveBlocks)\n\t\t{\n\t\t\tthis.saveBlocks.each((k, o) => {\n\t\t\t\tif (parseInt($(o).attr('data-col')) > pref.max_col)\n\t\t\t\t{\n\t\t\t\t\t$(o).attr('data-col', pref.max_col);\n\t\t\t\t}\n\t\t\t\tif (parseInt($(o).attr('data-sizex')) > pref.max_scale)\n\t\t\t\t{\n\t\t\t\t\t$(o).attr('data-sizex', pref.max_scale);\n\t\t\t\t}\n\t\t\t\tif (parseInt($(o).attr('data-sizey')) > pref.max_scale)\n\t\t\t\t{\n\t\t\t\t\t$(o).attr('data-sizey', pref.max_scale);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.$gridster.children('ul').append(this.saveBlocks);\n\t\t}\n\n\t\t// resize wrap width\n\t\tthis.resizeWrapWidth();\n\n\t\t// init gridster\n\t\tthis.gridster = this.$gridster.children('ul').gridster({\n\t\t\twidget_margins: [innnerMargin, innnerMargin],\n\t\t\twidget_base_dimensions: [pref.width, pref.height],\n\t\t\tmax_cols : pref.max_col,\n\t\t\tresize : {\n\t\t\t\tenabled : true\n\t\t\t\t,max_size : [pref.max_scale, pref.max_scale]\n\t\t\t}\n\t\t}).data('gridster');\n\t},\n\n\t/**\n\t * Resize container\n\t */\n\tresizeWrapWidth()\n\t{\n\t\tvar pref = this.props.preference;\n\t\tvar width = (pref.width * pref.max_col) + ((pref.max_col) * pref.inner_margin);\n\t\tthis.$gridster.width(width);\n\n\t\tvar margin_gridster = parseInt(this.$gridster.parent().css('padding-left')) * 2;\n\t\tvar margin_editor = parseInt($('.ple-editor').css('padding')) * 2;\n\t\tvar width_sidebar = $('.ple-sidebar').width();\n\t\tvar bodyWidth = this.$gridster.outerWidth() + margin_gridster + margin_editor + width_sidebar;\n\n\t\tthis.props.resizeWidth(bodyWidth);\n\t},\n\n\t/**\n\t * Clear blocks\n\t */\n\tclear()\n\t{\n\t\tthis.$gridster.find('li').removeAttr('style class');\n\t\tthis.saveBlocks = $(this.$gridster.children('ul').html());\n\t\tthis.gridster.destroy(true);\n\t\tthis.$gridster.children().remove();\n\t\tthis.$gridster.removeClass('ready').removeAttr('style');\n\t},\n\n\t/**\n\t * Init gridster\n\t */\n\tinit()\n\t{\n\t\tthis.create();\n\t\tthis.randomAddBlocks(5, this.props.preference.max_scale, this.props.preference.max_scale);\n\t},\n\n\t/**\n\t * Update preference\n\t */\n\tupdatePreference()\n\t{\n\t\tthis.clear();\n\t\tthis.create();\n\t},\n\n\t/**\n\t * Make block\n\t *\n\t * @param {object} params\n\t */\n\tblock(params)\n\t{\n\t\tif (!params.sizeX || !params.sizeY) return false;\n\n\t\tvar $li = $('<li>' + ((params.text) ? params.text : '') + '</li>');\n\n\t\tthis.gridster.add_widget($li, params.sizeX, params.sizeY, false);\n\t},\n\n\t/**\n\t * Random add blocks\n\t *\n\t * @param {int} count\n\t * @param {int} max_width\n\t * @param {int} max_height\n\t */\n\trandomAddBlocks(count, max_width, max_height)\n\t{\n\t\tfor (var i=0; i<count; i++)\n\t\t{\n\t\t\tthis.block({\n\t\t\t\tsizeX : util.getRandomRange(1, max_width),\n\t\t\t\tsizeY : util.getRandomRange(1, max_height),\n\t\t\t\ttext : i.toString()\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Add block\n\t *\n\t * @param {int} x\n\t * @param {int} y\n\t */\n\taddBlock(x, y)\n\t{\n\t\tx = x || 1;\n\t\ty = y || 1;\n\t\tx = (x > this.props.preference.max_scale) ? this.props.preference.max_scale : x;\n\t\ty = (y > this.props.preference.max_scale) ? this.props.preference.max_scale : y;\n\t\tthis.block({ sizeX : x, sizeY : y, text : 'add' });\n\t},\n\n\t/**\n\t * Shuffle blocks\n\t */\n\tshuffleBlocks()\n\t{\n\t\tthis.clear();\n\n\t\tthis.saveBlocks.each((k, o) => {\n\t\t\t$(o).attr({\n\t\t\t\t'data-col' : util.getRandomRange(1, this.props.preference.max_col),\n\t\t\t\t'data-row' : util.getRandomRange(1, 2),\n\t\t\t\t'data-sizex' : util.getRandomRange(1, this.props.preference.max_scale),\n\t\t\t\t'data-sizey' : util.getRandomRange(1, this.props.preference.max_scale)\n\t\t\t});\n\t\t});\n\n\t\tthis.create();\n\t},\n\n\n\t/**\n\t * render\n\t */\n\trender()\n\t{\n\t\t// act action\n\t\tif (typeof this[this.props.action] === 'function')\n\t\t{\n\t\t\tthis[this.props.action]();\n\t\t}\n\n\t\treturn (\n            <div className=\"gridster-wrap\">\n\t\t\t\t<div ref=\"gridster\" className=\"gridster\"></div>\n        \t</div>\n\t\t);\n\t}\n});","module.exports = React.createClass({\n\n\tdisplayName : 'Nav-bottom',\n\n\tactGenerator()\n\t{\n\t\tlog('ACTION GENERATE');\n\t},\n\n\t/**\n\t * render\n\t */\n\trender()\n\t{\n\t\treturn (\n            <nav className=\"nav-bottom\">\n        \t\t<button type=\"button\" title=\"Generate export\" onClick={this.props.generate}>\n        \t\t\t<i className=\"sp-ico ico-check\"/>\n        \t\t\t<span>Generate</span>\n        \t\t</button>\n        \t</nav>\n\t\t);\n\t}\n});\n","module.exports = React.createClass({\n\n\tdisplayName : 'NavTop-Form',\n\tform : null,\n\n\tpropTypes : {\n\t\tupdate : React.PropTypes.func\n\t},\n\n\tgetInitialState()\n\t{\n\t\treturn {};\n\t},\n\n\tcomponentDidMount()\n\t{\n\t\tthis.form = ReactDOM.findDOMNode(this.refs.form);\n\t},\n\n\tupdate(e)\n\t{\n\t\te.preventDefault();\n\t\tthis.props.update({\n\t\t\twidth : parseInt(this.form.width.value),\n\t\t\theight : parseInt(this.form.height.value),\n\t\t\tmax_col : parseInt(this.form.max_col.value),\n\t\t\tmax_scale : parseInt(this.form.max_scale.value),\n\t\t\touter_margin : parseInt(this.form.outer_margin.value),\n\t\t\tinner_margin : parseInt(this.form.inner_margin.value)\n\t\t});\n\t},\n\n\t/**\n\t * render\n\t */\n\trender()\n\t{\n\t\treturn (\n\t\t\t<article className=\"form\" id=\"settings\">\n\t\t\t\t<form method=\"post\" ref=\"form\" onSubmit={this.update}>\n\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t<legend className=\"blind\">Settings form</legend>\n\t\t\t\t\t\t<h1>Settings</h1>\n\t\t\t\t\t\t<dl>\n\t\t\t\t\t\t\t<dt><label htmlhtmlFor=\"frm_name\">Min Width</label></dt>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\" name=\"width\" id=\"frm_name\"\n\t\t\t\t\t\t\t\t\tmin=\"1\" max=\"999\" maxLength=\"3\"\n\t\t\t\t\t\t\t\t\tdefaultValue={this.props.preference.width}\n\t\t\t\t\t\t\t\t\trequired/>\n\t\t\t\t\t\t\t\t<span>px</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t<dl>\n\t\t\t\t\t\t\t<dt><label htmlFor=\"frm_height\">Min Height</label></dt>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\" name=\"height\" id=\"frm_height\"\n\t\t\t\t\t\t\t\t\tmin=\"1\" max=\"999\"\n\t\t\t\t\t\t\t\t\tdefaultValue={this.props.preference.height}/>\n\t\t\t\t\t\t\t\t<span>px</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t<dl>\n\t\t\t\t\t\t\t<dt><label htmlFor=\"frm_max_col\">Max Column</label></dt>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\" name=\"max_col\" id=\"frm_max_col\"\n\t\t\t\t\t\t\t\t\tmin=\"1\" max=\"99\"\n\t\t\t\t\t\t\t\t\tdefaultValue={this.props.preference.max_col}/>\n\t\t\t\t\t\t\t\t<span>ea</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t<dl>\n\t\t\t\t\t\t\t<dt><label htmlFor=\"frm_max_scale\">Max Scale</label></dt>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\" name=\"max_scale\" id=\"frm_max_scale\"\n\t\t\t\t\t\t\t\t\tmin=\"1\" max=\"99\"\n\t\t\t\t\t\t\t\t\tdefaultValue={this.props.preference.max_scale}/>\n\t\t\t\t\t\t\t\t<span>x</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t<dl>\n\t\t\t\t\t\t\t<dt><label htmlFor=\"frm_outer_margin\">Outer Margin</label></dt>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\" name=\"outer_margin\" id=\"frm_outer_margin\"\n\t\t\t\t\t\t\t\t\tmin=\"1\" max=\"500\"\n\t\t\t\t\t\t\t\t\tdefaultValue={this.props.preference.outer_margin}/>\n\t\t\t\t\t\t\t\t<span>px</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t<dl>\n\t\t\t\t\t\t\t<dt><label htmlFor=\"frm_inner_margin\">Inner Margin</label></dt>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\" name=\"inner_margin\" id=\"frm_inner_margin\"\n\t\t\t\t\t\t\t\t\tmin=\"1\" max=\"500\"\n\t\t\t\t\t\t\t\t\tdefaultValue={this.props.preference.inner_margin}/>\n\t\t\t\t\t\t\t\t<span>px</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t</fieldset>\n\t\t\t\t\t<nav>\n\t\t\t\t\t\t<span><button type=\"reset\" onClick={this.props.reset}>Reset</button></span>\n\t\t\t\t\t\t<span><button type=\"submit\" className=\"submit\">Apply</button></span>\n\t\t\t\t\t</nav>\n\t\t\t\t</form>\n\t\t\t</article>\n\t\t);\n\t}\n});","// init components\nconst NavTopForm = require('./NavTop.Form.jsx');\n\n\nmodule.exports = React.createClass({\n\n\tdisplayName : 'NavTop',\n\n\tgetInitialState()\n\t{\n\t\treturn {\n\t\t\tshow_form : false,\n\t\t\tfix : false\n\t\t};\n\t},\n\n\n\t/**\n\t * CLICK EVENTS\n\t */\n\n\t/**\n\t * Toggle setting form\n\t */\n\ttoggleSetting()\n\t{\n\t\tvar self = this;\n\t\tif (!this.state.show_form == true)\n\t\t{\n\t\t\t$(document).on('click', function(e){\n\t\t\t\tif (!$(e.target).closest('#settings').length)\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t$(this).off('click');\n\t\t\t\t\tself.setState({ show_form : false });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.setState({ show_form : !this.state.show_form });\n\t},\n\n\t/**\n\t * Close setting layer\n\t */\n\tcloseSetting()\n\t{\n\t\t$(document).off('click');\n\t\tthis.setState({ show_form : false });\n\t},\n\n\t/**\n\t * Play scroll event\n\t */\n\tscrollEvent()\n\t{\n\t\tvar windowTop = $(window).scrollTop();\n\t\tvar $el = $(ReactDOM.findDOMNode(this));\n\t\tif ($el.offset().top < windowTop)\n\t\t{\n\t\t\tthis.setState({ fix : true });\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setState({ fix : false });\n\t\t}\n\t},\n\n\t/**\n\t * RENDER\n\t */\n\trender()\n\t{\n\t\treturn (\n\t\t\t<div className=\"nav-top-wrap\">\n\t\t\t\t<nav className={'nav-top' + ((this.state.fix) ? ' fix' : '')}>\n\t\t\t\t\t<div className={'block' + ((this.state.show_form) ? ' is-active' : '')}>\n\t\t\t\t\t\t<button type=\"button\" title=\"Edit preference\" onClick={this.toggleSetting}>\n\t\t\t\t\t\t\t<i className=\"sp-ico ico-setting abs\">Setting</i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<NavTopForm\n\t\t\t\t\t\t\tupdate={this.props.update}\n\t\t\t\t\t\t\treset={this.props.reset}\n\t\t\t\t\t\t\tpreference={this.props.preference}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"block\">\n\t\t\t\t\t\t<button type=\"button\" title=\"Shuffle block\" onClick={this.props.actShuffleBlocks}>\n\t\t\t\t\t\t\t<i className=\"sp-ico ico-arrow-random abs\">Random block</i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"block\">\n\t\t\t\t\t\t<button type=\"button\" title=\"Add block\" onClick={this.props.actAddBlock}>\n\t\t\t\t\t\t\t<i className=\"sp-ico ico-plus abs\">Add block</i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</nav>\n\t\t\t</div>\n\t\t);\n\t}\n});\n","module.exports = React.createClass({\n\n\tdisplayName : 'Header',\n\n\tcomponentDidMount : function()\n\t{\n\n\t},\n\n\trender : function()\n\t{\n\t\treturn (\n\t\t\t<header className=\"ple-header\">\n\t\t\t\t<h1>Photo Layout Editor</h1>\n\t\t\t\t<p>사진 레이아웃 에디터입니다. 처음 시작하면 먼저 문서설정을 해주세요!</p>\n\t\t\t</header>\n\t\t);\n\t}\n});\n","module.exports = function Uploader()\n{\n\t/**\n\t * Local upload\n\t *\n\t * @param {Array} files\n\t * @param {Function} complete\n\t * @return {Array}\n\t */\n\tthis.local = function(files, complete)\n\t{\n\t\tvar reader = new FileReader();\n\t\tvar i = 0;\n\t\tvar result = [];\n\t\treader.onload = function(e)\n\t\t{\n\t\t\tresult.push(e.target.result);\n\n\t\t\t// check last queue\n\t\t\tif (i == (files.length - 1))\n\t\t\t{\n\t\t\t\tcomplete(result);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// trigger next queue\n\t\t\t\ti++;\n\t\t\t\treader.readAsDataURL(files[i]);\n\t\t\t}\n\t\t};\n\t\treader.readAsDataURL(files[i]);\n\t};\n\n\t/**\n\t * External upload\n\t *\n\t * @param {String} script\n\t * @param {String} dir\n\t * @param {String} url\n\t * @param {Array} files\n\t * @param {Function} complete\n\t * @return {Array}\n\t */\n\tthis.external = function(script, dir, url, files, complete)\n\t{\n\t\tvar xhr = new XMLHttpRequest();\n\n\t\tif (typeof FormData === 'function' || typeof FormData === 'object')\n\t\t{\n\t\t\tvar formData = new FormData();\n\n\t\t\tfor (var i=0; i<files.length; i++)\n\t\t\t{\n\t\t\t\tformData.append('files[]', files[i]);\n\t\t\t}\n\t\t\tformData.append('dir', dir);\n\t\t\tformData.append('url', url);\n\n\t\t\txhr.open('post', script, true);\n\t\t\txhr.addEventListener('load', function(e){\n\t\t\t\tvar response = null;\n\t\t\t\tif (e.target.readyState == 4)\n\t\t\t\t{\n\t\t\t\t\tswitch (e.target.status)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase 200:\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tvar result = JSON.parse(decodeURIComponent(e.target.responseText.replace(/\\+/g, '%20')));\n\t\t\t\t\t\t\t\tcomplete(result);\n\t\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\t\tcomplete({\n\t\t\t\t\t\t\t\t\t'state' : 'error',\n\t\t\t\t\t\t\t\t\t'message' : e.target.responseText\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 404:\n\t\t\t\t\t\t\tresponse = {\n\t\t\t\t\t\t\t\tstate : 'error',\n\t\t\t\t\t\t\t\tmessage : '404 - File not found'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 403:\n\t\t\t\t\t\t\tresponse = {\n\t\t\t\t\t\t\t\tstate : 'error',\n\t\t\t\t\t\t\t\tmessage : '403 - Forbidden file type'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tresponse = {\n\t\t\t\t\t\t\t\tstate : 'error',\n\t\t\t\t\t\t\t\tmessage : 'Unknown Error'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresponse = {\n\t\t\t\t\t\tstate : 'error',\n\t\t\t\t\t\tmessage : 'Unknown Error'\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t\txhr.send(formData);\n\t\t}\n\n\t\treturn null;\n\t}\n};","module.exports = {\n\n\t/**\n\t * Shuffle items\n\t *\n\t * @param o\n\t * @returns {*}\n\t */\n\t// TODO : 인수 타입 확인해보고 주석에 있는 타입 변경하기\n\tshuffle : function(o)\n\t{\n\t\tfor (var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);\n\t\treturn o;\n\t},\n\n\t/**\n\t * Random item in range\n\t * @param {int} min\n\t * @param {int} max\n\t * @returns {number}\n\t */\n\tgetRandomRange : function(min, max)\n\t{\n\t\tmax += 1;\n\t\treturn Math.floor(Math.random() * (max - min) + min);\n\t}\n};","module.exports = React.createClass({\n\n\tdisplayName : 'Navigation',\n\n\tgetInitialState()\n\t{\n\t\treturn {\n\t\t\tinputFile : <input type=\"file\" onChange={this.upload} multiple />\n\t\t};\n\t},\n\n\t/**\n\t * Attach images\n\t */\n\tattachImages()\n\t{\n\t\tlog('attach image to grid block');\n\t},\n\n\t/**\n\t * Upload images\n\t *\n\t * @param {Event} e\n\t */\n\tupload(e)\n\t{\n\t\tthis.props.upload(e.target.files);\n\n\t\t// reset input[type=file]\n\t\tvar $input = $(this.refs.inputFile);\n\t\t$input.replaceWith($input.val('').clone(true));\n\t},\n\n\t/**\n\t * render\n\t */\n\trender()\n\t{\n\t\treturn (\n            <nav className=\"nav-top\">\n        \t\t<div className=\"wrap\">\n        \t\t\t<button type=\"button\" title=\"attach images\" onClick={this.props.attach}>\n\t\t\t\t\t\t<i className=\"sp-ico ico-arrow-left abs\">Moving the image to grid block</i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type=\"button\" title=\"toggle select\" onClick={this.props.toggleSelect}>\n\t\t\t\t\t\t<i className=\"sp-ico ico-select abs\">Toggle all select</i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span title=\"upload images\">\n\t\t\t\t\t\t<input type=\"file\" ref=\"inputFile\" onChange={this.upload} multiple />\n\t\t\t\t\t\t<i className=\"sp-ico ico-upload abs\">upload images</i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<button type=\"button\" title=\"remove images\" onClick={this.props.remove}>\n\t\t\t\t\t\t<i className=\"sp-ico ico-trash abs\">remove images</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</nav>\n\t\t);\n\t}\n});\n","const Uploader = require('../lib/Uploader.js');\nconst Nav = require('./Nav.jsx');\nconst UploadFiles = require('./UploadFiles.jsx');\n\n\nmodule.exports = React.createClass({\n\n\tdisplayName : 'Sidebar',\n\n\tpropTypes : {\n\t\tuploadScript : React.PropTypes.string,\n\t\tdefaultUploadFiles : React.PropTypes.array\n\t},\n\n\tuploader : new Uploader(),\n\n\tgetDefaultProps()\n\t{\n\t\treturn {\n\t\t\tuploadScript : null\n\t\t};\n\t},\n\n\tgetInitialState()\n\t{\n\t\treturn {\n\t\t\tuploadImages : this.importImages(this.props.defaultUploadFiles),\n\t\t\tis_loading : false\n\t\t};\n\t},\n\n\t/**\n\t * Import images\n\t *\n\t * @param {array} files\n\t * @return {array}\n\t * */\n\timportImages(files)\n\t{\n\t\tfiles = files || [];\n\t\treturn files.map((o) => {\n\t\t\treturn {\n\t\t\t\ton : false,\n\t\t\t\timage : o,\n\t\t\t\tstyle : { backgroundImage : 'url(' + o + ')' }\n\t\t\t};\n\t\t});\n\t},\n\n\t/**\n\t * upload images\n\t *\n\t * @Param {Files} files\n\t */\n\tupload(files)\n\t{\n\t\tvar uploadFiles = [];\n\n\t\tfor (var i=0; i<files.length; i++)\n\t\t{\n\t\t\tuploadFiles.push(files[i]);\n\t\t}\n\n\t\t// on loading\n\t\tthis.setState({ is_loading : true });\n\n\t\t// action upload\n\t\tif (this.props.uploadScript)\n\t\t{\n\t\t\t// is external script upload\n\t\t\tthis.uploader.external(\n\t\t\t\tthis.props.uploadScript,\n\t\t\t\tthis.props.uploadDir,\n\t\t\t\tthis.props.uploadUrl,\n\t\t\t\tuploadFiles,\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.setState({ is_loading : false });\n\n\t\t\t\t\tif (response.state == 'success')\n\t\t\t\t\t{\n\t\t\t\t\t\tvar data = response.images;\n\n\t\t\t\t\t\tdata.forEach((o) => {\n\t\t\t\t\t\t\tthis.state.uploadImages.push({\n\t\t\t\t\t\t\t\ton : false,\n\t\t\t\t\t\t\t\timage : o.loc,\n\t\t\t\t\t\t\t\tstyle : { backgroundImage : 'url(' + o.loc + ')' }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tuploadImages : this.state.uploadImages\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlog(response.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// is local upload\n\t\t\tthis.setState({ is_loading : true });\n\t\t\tthis.uploader.local(uploadFiles, (data) => {\n\t\t\t\tvar result = this.state.uploadImages;\n\t\t\t\tthis.setState({ is_loading : false });\n\n\t\t\t\tdata.forEach((o) => {\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\ton : false,\n\t\t\t\t\t\timage : o,\n\t\t\t\t\t\tstyle : { backgroundImage : 'url(' + o + ')' }\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis.setState({ uploadImages : result });\n\t\t\t});\n\t\t}\n\t},\n\n\tremove()\n\t{\n\t\tvar selectedKeys = [];\n\n\t\tif (!this.state.uploadImages.length)\n\t\t{\n\t\t\talert('이미지가 없습니다.');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state.uploadImages.forEach((o, k) => {\n\t\t\tif (o.on)\n\t\t\t{\n\t\t\t\tselectedKeys.push(k);\n\t\t\t}\n\t\t});\n\n\t\tif (selectedKeys.length)\n\t\t{\n\t\t\tselectedKeys.forEach((o) => {\n\t\t\t\tdelete this.state.uploadImages[o];\n\t\t\t});\n\t\t\tthis.setState({ uploadImages : this.state.uploadImages });\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (confirm('선택된 사진이 없습니다. 전부 삭제할까요?'))\n\t\t\t{\n\t\t\t\tthis.setState({ uploadImages : [] });\n\t\t\t}\n\t\t}\n\t},\n\n\tattach()\n\t{\n\t\tvar items = [];\n\t\tthis.state.uploadImages.forEach((o) => {\n\t\t\tif (o.on)\n\t\t\t{\n\t\t\t\titems.push(o.image);\n\t\t\t}\n\t\t});\n\t\tif (items.length)\n\t\t{\n\t\t\tthis.props.attachImages(items);\n\t\t}\n\t\telse\n\t\t{\n\t\t\talert('please select image');\n\t\t\treturn false;\n\t\t}\n\t},\n\n\ttoggleSelect()\n\t{\n\t\tvar items = this.state.uploadImages;\n\t\tvar $items = $(ReactDOM.findDOMNode(this.refs.files));\n\t\tvar sw = ($items.find('span.on').length > 0);\n\t\titems.forEach((o) => {\n\t\t\to.on = (!sw);\n\t\t});\n\t\tthis.setState({ uploadImages : items });\n\t},\n\n\tupdate(data)\n\t{\n\t\tthis.setState({ uploadImages : data });\n\t},\n\n\n\t/**\n\t * render\n\t */\n\trender()\n\t{\n\t\treturn (\n\t\t\t<aside className={ 'ple-sidebar' + ((this.state.is_loading) ? ' loading' : '') }>\n\t\t\t\t<button type=\"button\" onClick={this.props.toggleSidebar} className=\"toggle\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<i className={'sp-ico abs' + ((this.props.show) ? ' ico-arrow-right2' : ' ico-arrow-left2')}>Toggle sidebar</i>\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n                <Nav ref=\"nav\"\n\t\t\t\t\t upload={this.upload}\n\t\t\t\t\t remove={this.remove}\n\t\t\t\t\t attach={this.attach}\n\t\t\t\t\t toggleSelect={this.toggleSelect} />\n                <UploadFiles ref=\"files\"\n\t\t\t\t\t\t\t uploadImages={this.state.uploadImages}\n\t\t\t\t\t\t\t update={this.update} />\n\t\t\t</aside>\n\t\t);\n\t}\n});\n","module.exports = React.createClass({\n\n\tdisplayName: 'UploadFiles',\n\n\tpropTypes: {\n\t\tuploadImages: React.PropTypes.array,\n\t\tupdate: React.PropTypes.func\n\t},\n\tis_multiSelect : false,\n\n\tgetInitialState()\n\t{\n\t\treturn {}\n\t},\n\n\tcomponentDidMount()\n\t{\n\t\tconst CTRL = 17;\n\t\tconst CMD = 91;\n\n\t\tvar onKeydown = (e) => {\n\t\t\tif (e.keyCode == CTRL || e.keyCode == CMD)\n\t\t\t{\n\t\t\t\tthis.is_multiSelect = true;\n\t\t\t\t$(window).off('keydown').on('keyup', onKeyUp);\n\t\t\t}\n\t\t};\n\n\t\tvar onKeyUp = () => {\n\t\t\tthis.is_multiSelect = false;\n\t\t\t$(window).off('keyup').on('keydown', onKeydown);\n\t\t};\n\n\t\t$(window).on('keydown', onKeydown);\n\t},\n\n\tonSelect(e)\n\t{\n\t\tlet currentKey = parseInt(e.currentTarget.getAttribute('data-key'));\n\t\tlet uploadImages = this.props.uploadImages;\n\n\t\tif (this.is_multiSelect)\n\t\t{\n\t\t\tuploadImages[currentKey].on = !uploadImages[currentKey].on;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tuploadImages.forEach((data, key) => {\n\t\t\t\tdata.on = (key == currentKey) ? !data.on : false;\n\t\t\t});\n\t\t}\n\n\t\tthis.props.update(uploadImages);\n\t},\n\n\t/**\n\t * render\n\t */\n\trender()\n\t{\n\t\tvar items = [];\n\n\t\t// make item elements\n\t\tthis.props.uploadImages.forEach((item, key) => {\n\t\t\titems.push(\n\t\t\t\t<li key={key} data-key={key} onClick={this.onSelect}>\n\t\t\t\t\t<span style={item.style} className={(item.on) ? 'on' : ''}>.img</span>\n\t\t\t\t</li>\n\t\t\t);\n\t\t});\n\n\t\treturn (\n            <div className=\"upload-files\">\n\t\t\t\t<div className=\"wrap\">\n        \t\t\t<ul ref=\"items\">{items}</ul>\n\t\t\t\t</div>\n        \t</div>\n\t\t);\n\t}\n});\n"],"sourceRoot":"/source/"}